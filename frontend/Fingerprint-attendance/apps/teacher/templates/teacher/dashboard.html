<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Teacher Dashboard - Fingerprint Attendance System</title>
    <style>
      /* ========== GLOBAL STYLES ========== */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: #f5f7fa;
        color: #333;
      }

      /* ========== HEADER ========== */
      .header {
        background: linear-gradient(135deg, #2196f3 0%, #1976d2 100%);
        color: white;
        padding: 20px 40px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }

      .header-top {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
      }

      .header h1 {
        font-size: 1.8em;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .user-info {
        display: flex;
        align-items: center;
        gap: 15px;
      }

      .logout-btn {
        background: rgba(255, 255, 255, 0.2);
        border: 1px solid rgba(255, 255, 255, 0.3);
        color: white;
        padding: 8px 16px;
        border-radius: 5px;
        cursor: pointer;
        text-decoration: none;
        transition: background 0.3s;
      }

      .logout-btn:hover {
        background: rgba(255, 255, 255, 0.3);
      }

      /* ========== STATS CARDS ========== */
      .stats-section {
        padding: 30px 40px;
      }

      .stats-cards {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
      }

      .stat-card {
        background: white;
        padding: 25px;
        border-radius: 10px;
        box-shadow: 0 3px 15px rgba(0, 0, 0, 0.08);
        display: flex;
        align-items: center;
        gap: 20px;
        transition: transform 0.3s;
      }

      .stat-card:hover {
        transform: translateY(-5px);
      }

      .stat-icon {
        font-size: 2.5em;
        width: 70px;
        height: 70px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .stat-card:nth-child(1) .stat-icon {
        background: #e3f2fd;
        color: #2196f3;
      }
      .stat-card:nth-child(2) .stat-icon {
        background: #e8f5e9;
        color: #4caf50;
      }
      .stat-card:nth-child(3) .stat-icon {
        background: #fff3e0;
        color: #ff9800;
      }
      .stat-card:nth-child(4) .stat-icon {
        background: #f3e5f5;
        color: #9c27b0;
      }

      .stat-info h3 {
        font-size: 1em;
        color: #666;
        margin-bottom: 5px;
      }

      .stat-number {
        font-size: 2em;
        font-weight: bold;
        color: #333;
      }

      /* ========== QUICK ACTIONS ========== */
      .quick-actions {
        padding: 0 40px 30px;
      }

      .section-title {
        font-size: 1.5em;
        color: #333;
        margin-bottom: 20px;
        padding-bottom: 10px;
        border-bottom: 2px solid #2196f3;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .action-cards {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
      }

      .action-card {
        background: white;
        padding: 25px;
        border-radius: 10px;
        box-shadow: 0 3px 15px rgba(0, 0, 0, 0.08);
        text-align: center;
        transition: all 0.3s;
        border: 2px solid transparent;
      }

      .action-card:hover {
        border-color: #2196f3;
        transform: translateY(-5px);
      }

      .action-icon {
        font-size: 3em;
        margin-bottom: 15px;
        color: #2196f3;
      }

      .action-card h3 {
        margin-bottom: 10px;
        color: #333;
      }

      .action-card p {
        color: #666;
        margin-bottom: 20px;
        line-height: 1.5;
      }

      .action-btn {
        display: inline-block;
        background: #2196f3;
        color: white;
        padding: 10px 25px;
        border-radius: 5px;
        text-decoration: none;
        font-weight: bold;
        transition: background 0.3s;
      }

      .action-btn:hover {
        background: #1976d2;
      }

      /* ========== ACTIVE SESSIONS ========== */
      .active-sessions {
        padding: 0 40px 30px;
      }

      .sessions-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 20px;
      }

      .session-card {
        background: white;
        border-radius: 10px;
        box-shadow: 0 3px 15px rgba(0, 0, 0, 0.08);
        overflow: hidden;
      }

      .session-header {
        background: #2196f3;
        color: white;
        padding: 15px 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .session-header h4 {
        font-size: 1.2em;
      }

      .session-status {
        background: #4caf50;
        padding: 3px 10px;
        border-radius: 20px;
        font-size: 0.9em;
      }

      .session-body {
        padding: 20px;
      }

      .session-info {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 15px;
        margin-bottom: 20px;
      }

      .info-item label {
        display: block;
        color: #666;
        font-size: 0.9em;
        margin-bottom: 5px;
      }

      .info-item span {
        font-weight: bold;
        color: #333;
      }

      .session-actions {
        display: flex;
        gap: 10px;
      }

      .btn {
        padding: 8px 15px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-weight: bold;
        transition: all 0.3s;
      }

      .btn-primary {
        background: #2196f3;
        color: white;
      }

      .btn-primary:hover {
        background: #1976d2;
      }

      .btn-danger {
        background: #f44336;
        color: white;
      }

      .btn-danger:hover {
        background: #d32f2f;
      }

      /* ========== RECENT ACTIVITY ========== */
      .recent-activity {
        padding: 0 40px 30px;
      }

      .activity-list {
        background: white;
        border-radius: 10px;
        box-shadow: 0 3px 15px rgba(0, 0, 0, 0.08);
        overflow: hidden;
      }

      .activity-item {
        padding: 15px 20px;
        border-bottom: 1px solid #eee;
        display: flex;
        align-items: center;
        gap: 15px;
      }

      .activity-item:last-child {
        border-bottom: none;
      }

      .activity-icon {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: #e3f2fd;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #2196f3;
      }

      .activity-details h4 {
        margin-bottom: 5px;
        color: #333;
      }

      .activity-details p {
        color: #666;
        font-size: 0.9em;
      }

      .activity-time {
        margin-left: auto;
        color: #999;
        font-size: 0.9em;
      }

      /* ========== FOOTER ========== */
      .footer {
        background: #333;
        color: white;
        padding: 20px 40px;
        text-align: center;
        margin-top: 30px;
      }

      /* ========== RESPONSIVE ========== */
      @media (max-width: 768px) {
        .header,
        .stats-section,
        .quick-actions,
        .active-sessions,
        .recent-activity {
          padding: 20px;
        }

        .header-top {
          flex-direction: column;
          gap: 15px;
          text-align: center;
        }

        .stats-cards,
        .action-cards,
        .sessions-grid {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <!-- Header -->
    <header class="header">
      <div class="header-top">
        <h1>üë®‚Äçüè´ Teacher Dashboard</h1>
        <div class="user-info">
          <span
            >Welcome,
            <strong>{{ teacher_name|default:"Professor" }}</strong></span
          >
          <a href="{% url 'logout' %}" class="logout-btn">Logout</a>
        </div>
      </div>
    </header>

    <!-- Stats Section -->
    <section class="stats-section">
      <div class="stats-cards">
        <div class="stat-card">
          <div class="stat-icon">üìä</div>
          <div class="stat-info">
            <h3>Active Courses</h3>
            <div class="stat-number">{{ active_courses|default:"3" }}</div>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon">üë•</div>
          <div class="stat-info">
            <h3>Total Students</h3>
            <div class="stat-number">{{ total_students|default:"85" }}</div>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon">‚úÖ</div>
          <div class="stat-info">
            <h3>Today's Attendance</h3>
            <div class="stat-number">{{ today_attendance|default:"78" }}%</div>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon">üìÖ</div>
          <div class="stat-info">
            <h3>Active Sessions</h3>
            <div class="stat-number">{{ active_sessions|default:"2" }}</div>
          </div>
        </div>
      </div>
    </section>

    <!-- Quick Actions -->
    <section class="quick-actions">
      <h2 class="section-title">üöÄ Quick Actions</h2>
      <div class="action-cards">
        <div class="action-card">
          <div class="action-icon">‚ûï</div>
          <h3>Create New Session</h3>
          <p>Start a new attendance session for your class</p>
          <a href="{% url 'teacher:create_session' %}" class="action-btn"
            >Create Session</a
          >
        </div>

        <div class="action-card">
          <div class="action-icon">üìã</div>
          <h3>View Attendance Reports</h3>
          <p>Generate and download attendance reports</p>
          <a href="#" class="action-btn">View Reports</a>
        </div>

        <div class="action-card">
          <div class="action-icon">üë§</div>
          <h3>Manage Students</h3>
          <p>Add or remove students from your courses</p>
          <a href="#" class="action-btn">Manage Students</a>
        </div>
      </div>
    </section>

    <!-- Active Sessions -->
    <section class="active-sessions">
      <h2 class="section-title">üìÖ Active Sessions</h2>
      <div class="sessions-grid">
        {% for session in active_sessions_list %}
        <div class="session-card">
          <div class="session-header">
            <h4>{{ session.course_name }}</h4>
            <span class="session-status">Active</span>
          </div>
          <div class="session-body">
            <div class="session-info">
              <div class="info-item">
                <label>Course Code</label>
                <span>{{ session.course_code }}</span>
              </div>
              <div class="info-item">
                <label>Students Present</label>
                <span
                  >{{ session.students_present }}/{{ session.total_students
                  }}</span
                >
              </div>
              <div class="info-item">
                <label>Started At</label>
                <span>{{ session.start_time }}</span>
              </div>
              <div class="info-item">
                <label>Duration</label>
                <span>{{ session.duration }} min</span>
              </div>
            </div>
            <div class="session-actions">
              <button class="btn btn-primary">View Details</button>
              <button class="btn btn-danger">End Session</button>
            </div>
          </div>
        </div>
        {% empty %}
        <div style="text-align: center; padding: 40px; color: #666">
          <p style="font-size: 1.2em">No active sessions</p>
          <p>Create your first attendance session to get started</p>
        </div>
        {% endfor %}
      </div>
    </section>

    <!-- Recent Activity -->
    <section class="recent-activity">
      <h2 class="section-title">üìù Recent Activity</h2>
      <div class="activity-list">
        {% for activity in recent_activity %}
        <div class="activity-item">
          <div class="activity-icon">
            {% if activity.type == "attendance" %}‚úÖ {% elif activity.type ==
            "session" %}üìÖ {% elif activity.type == "student" %}üë§ {% else
            %}üìå{% endif %}
          </div>
          <div class="activity-details">
            <h4>{{ activity.title }}</h4>
            <p>{{ activity.description }}</p>
          </div>
          <div class="activity-time">{{ activity.time }}</div>
        </div>
        {% empty %}
        <div class="activity-item">
          <div class="activity-details">
            <h4>No recent activity</h4>
            <p>Your activity will appear here</p>
          </div>
        </div>
        {% endfor %}
      </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
      <p>Fingerprint Attendance System ‚Ä¢ Teacher Portal</p>
      <p style="margin-top: 5px; font-size: 0.9em; opacity: 0.8">
        Need help? Contact system administrator
      </p>
    </footer>
  </body>
</html>
